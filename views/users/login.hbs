<section class="vh-100 background-image" >
  <div class="container  h-100">        
      <div class="row d-flex justify-content-center align-items-center">
        <div class="col-md-6 col-lg-6  bg-white  mt-5">
          <div class="card-body text-black p-5 cart-border">
            <form id="loginform" action="/user_signin" method="post">
              <div class="d-flex align-items-center mb-3">
                <span class="fs-1 text-center fw-bold  mx-auto">Welcome To <span class="text-danger">MyOwnDesign</span></span>
              </div>
              {{#if logginErr}}
                <p class="p-2 mt-2 mb-2 text-danger">Invalid email-ID Or Password</p>
              {{/if }}
              {{#if blocked}}
                <p class="p-2 mt-2 mb-2 text-center text-danger">! Blocked by admin</p>
              {{/if }}
              <div class="form-outline">
                <input type="text" id="email" class="form-control form-control-lg" placeholder="Email-id" name="email"/>
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
              </div>
              <div class="form-outline mb-4">
                <input type="password" id="password" class="form-control"  placeholder="Password" name="password">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
              </div>
              <div class="pt-1 mb-4 d-grid">
                <button class="btn btn-danger" type="submit">Login</button>
              </div>
              {{#if adminLoginErr}}
                <p class="p-2 mt-2 mb-2 text-danger">Something went wrong try again</p>
              {{/if }}
              <p class="text-dark">Click Here for <a href="user_registration" class="text-success link-footer"> Sign UP</a> / <a class="text-success link-footer"href="/otp">OTP Login</a> / <a class="text-success link-footer"href="/">Back To Home</a></p>
            </form>
          </div>
      </div>
      </div>
      
    
  </div>
</section>

<script>
  const form = document.getElementById("loginform")
  const email = document.getElementById("email")
  const password = document.getElementById("password")
  form.addEventListener("submit", (e) => {
    checkInput()
    //chek if all the element valid or not
    let isSuccess = form.querySelectorAll(".form-outline.success")
    let formoutline = form.querySelectorAll(".form-outline")
    if (isSuccess) {
      //checking if all the elements have success class
      if (formoutline.length == isSuccess.length) {
      } 
      else {
        e.preventDefault();
      }
    }
  })
  function checkInput() {
    //get values form input feald
    const emailValue = email.value.trim()
    const passwordValue = password.value.trim()
    // validation email
    if (emailValue === '') {
      setErrorFor(email, 'Email connot be blank');
    } 
    else if (!isEmail(emailValue)) {
      setErrorFor(email, 'Email is not valid')
    } 
    else {
      setSuccessFor(email)
    }
    //validating password
    if (passwordValue === '') {
      setErrorFor(password, 'Password cannot be blank');
    }
    else{
      setSuccessFor(password);
    }
  }
  //setting error
  function setErrorFor(input, message) {
    const formoutline = input.parentElement;
    const small = formoutline.querySelector('small');
    small.innerText = message;
    formoutline.className = 'form-outline error'
  }
  //setting succress
  function setSuccessFor(input) {
    const formoutline = input.parentElement;
    formoutline.className = 'form-outline success'
  }
  // email validation
  function isEmail(email) {
    return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email);
  }
</script>





   